<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ”¯ä»˜ç½‘å…³ - æ”¯ä»˜å­¦ä¹ ç½‘</title>
    <link rel="stylesheet" href="css/style.css?v=1.1">
    <style>
        pre {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 16px;
      border-radius: 8px;
      overflow-x: auto;
      font-family: 'Consolas', 'Monaco', monospace;
      line-height: 1.5;
    }
    code {
      font-family: inherit;
    }
    /* ç®€å•é¢œè‰²åŒºåˆ† */
    .keyword { color: #569cd6; }
    .string { color: #ce9178; }
    .comment { color: #6a9955; }
    .function { color: #dcdcaa; }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="index.html">ğŸ’³ æ”¯ä»˜å­¦ä¹ ç½‘</a>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">é¦–é¡µ</a></li>
                <li><a href="gateways.html" class="active">æ”¯ä»˜ç½‘å…³</a></li>
                <li><a href="simulator.html">æ”¯ä»˜æ¨¡æ‹Ÿ</a></li>
                <li><a href="security.html">å®‰å…¨æœºåˆ¶</a></li>
                <li><a href="international-payment.html">è·¨å¢ƒæ”¯ä»˜</a></li>
                <li><a href="crypto-payment.html">åŠ å¯†æ”¯ä»˜</a></li>
                <li><a href="cross-border-eCommerce.html">è·¨å¢ƒç”µå•†</a></li>
            </ul>
            <div class="hamburger"><span></span><span></span><span></span></div>
        </div>
    </nav>

    <!-- é¡µé¢å¤´éƒ¨ -->
    <div class="page-header">
        <div class="container">
            <h1>ğŸ’° æ”¯ä»˜ç½‘å…³</h1>
            <p>å•†æˆ·ä¸é“¶è¡Œä¹‹é—´çš„æ¡¥æ¢</p>
        </div>
    </div>

    <main>
        <div class="container">
            <!-- ä»€ä¹ˆæ˜¯æ”¯ä»˜ç½‘å…³ -->
            <div class="content">
                <h2>ğŸŒ‰ æ ¸å¿ƒå®šä½</h2>
                <div class="highlight-box info">
                    <div class="highlight-title info-title">ğŸ”— æ”¯ä»˜ç½‘å…³ = å•†æˆ·ç³»ç»Ÿ â†” é“¶è¡Œç³»ç»Ÿ çš„ç¿»è¯‘å®˜</div>
                    <p>è´Ÿè´£<strong>äº¤æ˜“è·¯ç”±ã€åè®®è½¬æ¢ã€æ•°æ®åŠ å¯†ã€ç»“æœé€šçŸ¥</strong></p>
                </div>
            </div>

            <!-- ä¸»æµæ”¯ä»˜ç½‘å…³å¯¹æ¯” -->
            <div class="content">
                <h2>ğŸ¢ ä¸»æµç½‘å…³å¯¹æ¯”</h2>
                <table class="gateway-compare">
                    <thead>
                        <tr>
                            <th>ç½‘å…³</th>
                            <th>ç”¨æˆ·é‡</th>
                            <th>è¦†ç›–</th>
                            <th>ç‰¹ç‚¹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="gateway-name">ğŸ’™ æ”¯ä»˜å®</td>
                            <td>10äº¿+</td>
                            <td>ä¸­å›½</td>
                            <td>åŠŸèƒ½æœ€å…¨ã€AIé£æ§ã€åˆ·è„¸æ”¯ä»˜</td>
                        </tr>
                        <tr>
                            <td class="gateway-name">ğŸ’š å¾®ä¿¡æ”¯ä»˜</td>
                            <td>13äº¿+</td>
                            <td>ä¸­å›½</td>
                            <td>å°ç¨‹åºç”Ÿæ€ã€ç§åŸŸæµé‡</td>
                        </tr>
                        <tr>
                            <td class="gateway-name">ğŸ’œ Stripe</td>
                            <td>å…¨çƒ</td>
                            <td>135+å›½å®¶</td>
                            <td>å¼€å‘è€…å‹å¥½ã€å¤šå¸ç§</td>
                        </tr>
                        <tr>
                            <td class="gateway-name">ğŸ’™ PayPal</td>
                            <td>4äº¿+</td>
                            <td>190+å›½å®¶</td>
                            <td>è·¨å¢ƒæ”¯ä»˜ã€ä¹°å®¶ä¿æŠ¤</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- é›†æˆæ­¥éª¤ -->
            <div class="content">
                <h2>ğŸ”§ é›†æˆå››æ­¥èµ°</h2>
                <div class="flow-chart-horizontal" style="display: flex; align-items: flex-start; justify-content: space-between; gap: 20px; margin: 30px 0; flex-wrap: nowrap; padding: 20px 0; width: 100%;">
                    <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 220px; position: relative; margin: 10px; flex: 1; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                        <div class="flow-node-circle" style="width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; margin-bottom: 15px; box-shadow: 0 6px 20px rgba(0,0,0,0.2); z-index: 2; position: relative; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            ğŸ“
                        </div>
                        <div class="flow-node-title" style="font-size: 1.2rem; font-weight: 700; color: #2c3e50; margin-bottom: 12px; text-align: center;">
                            1. æ³¨å†Œå•†æˆ·
                        </div>
                        <div class="flow-node-content" style="background: #f8f9fa; border-radius: 12px; padding: 18px; text-align: center; width: 100%; border: 2px solid #e1e8ed; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
                            <ul style="margin: 0; padding: 0; list-style: none; font-size: 0.9rem; color: #666;">
                                <li style="padding: 5px 0; border-bottom: 1px dashed #e1e8ed;">è¥ä¸šæ‰§ç…§</li>
                                <li style="padding: 5px 0; border-bottom: 1px dashed #e1e8ed;">æ³•äººèº«ä»½è¯</li>
                                <li style="padding: 5px 0; border-bottom: none;">é“¶è¡Œè´¦æˆ·</li>
                            </ul>
                        </div>
                        <div style="content: ''; position: absolute; right: -30px; top: 30px; font-size: 2rem; color: #667eea; font-weight: bold; z-index: 10;">â†’</div>
                    </div>
                    <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 220px; position: relative; margin: 10px; flex: 1; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                        <div class="flow-node-circle" style="width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; margin-bottom: 15px; box-shadow: 0 6px 20px rgba(0,0,0,0.2); z-index: 2; position: relative; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            ğŸ”‘
                        </div>
                        <div class="flow-node-title" style="font-size: 1.2rem; font-weight: 700; color: #2c3e50; margin-bottom: 12px; text-align: center;">
                            2. è·å–å¯†é’¥
                        </div>
                        <div class="flow-node-content" style="background: #f8f9fa; border-radius: 12px; padding: 18px; text-align: center; width: 100%; border: 2px solid #e1e8ed; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
                            <ul style="margin: 0; padding: 0; list-style: none; font-size: 0.9rem; color: #666;">
                                <li style="padding: 5px 0; border-bottom: 1px dashed #e1e8ed;">merchant_id</li>
                                <li style="padding: 5px 0; border-bottom: 1px dashed #e1e8ed;">API Key</li>
                                <li style="padding: 5px 0; border-bottom: none;">åº”ç”¨AppID</li>
                            </ul>
                        </div>
                        <div style="content: ''; position: absolute; right: -30px; top: 30px; font-size: 2rem; color: #667eea; font-weight: bold; z-index: 10;">â†’</div>
                    </div>
                    <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 220px; position: relative; margin: 10px; flex: 1; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                        <div class="flow-node-circle" style="width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; margin-bottom: 15px; box-shadow: 0 6px 20px rgba(0,0,0,0.2); z-index: 2; position: relative; background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
                            ğŸ“¦
                        </div>
                        <div class="flow-node-title" style="font-size: 1.2rem; font-weight: 700; color: #2c3e50; margin-bottom: 12px; text-align: center;">
                            3. æ¥å…¥SDK
                        </div>
                        <div class="flow-node-content" style="background: #f8f9fa; border-radius: 12px; padding: 18px; text-align: center; width: 100%; border: 2px solid #e1e8ed; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
                            <ul style="margin: 0; padding: 0; list-style: none; font-size: 0.9rem; color: #666;">
                                <li style="padding: 5px 0; border-bottom: 1px dashed #e1e8ed;">æœåŠ¡ç«¯SDK</li>
                                <li style="padding: 5px 0; border-bottom: 1px dashed #e1e8ed;">å®¢æˆ·ç«¯SDK</li>
                                <li style="padding: 5px 0; border-bottom: none;">é…ç½®å¯†é’¥</li>
                            </ul>
                        </div>
                        <div style="content: ''; position: absolute; right: -30px; top: 30px; font-size: 2rem; color: #667eea; font-weight: bold; z-index: 10;">â†’</div>
                    </div>
                    <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 220px; position: relative; margin: 10px; flex: 1; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                        <div class="flow-node-circle" style="width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; margin-bottom: 15px; box-shadow: 0 6px 20px rgba(0,0,0,0.2); z-index: 2; position: relative; background: linear-gradient(135deg, #ff6b6b 0%, #ee5a5a 100%);">
                            ğŸ§ª
                        </div>
                        <div class="flow-node-title" style="font-size: 1.2rem; font-weight: 700; color: #2c3e50; margin-bottom: 12px; text-align: center;">
                            4. æ²™ç®±æµ‹è¯•
                        </div>
                        <div class="flow-node-content" style="background: #f8f9fa; border-radius: 12px; padding: 18px; text-align: center; width: 100%; border: 2px solid #e1e8ed; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
                            <ul style="margin: 0; padding: 0; list-style: none; font-size: 0.9rem; color: #666;">
                                <li style="padding: 5px 0; border-bottom: 1px dashed #e1e8ed;">ä¸‹å•æ¥å£</li>
                                <li style="padding: 5px 0; border-bottom: 1px dashed #e1e8ed;">å›è°ƒé€šçŸ¥</li>
                                <li style="padding: 5px 0; border-bottom: none;">é€€æ¬¾æµç¨‹</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- â­â­â­ æ ¸å¿ƒéš¾ç‚¹ â­â­â­ -->
            <div class="content" style="border: 3px solid #ff6b00; border-radius: 16px; margin: 30px 0;">
                <h2 style="color: #ff6b00;">ğŸ”¥ğŸ”¥ğŸ”¥ æ ¸å¿ƒéš¾ç‚¹ï¼ˆå¿…çœ‹ï¼‰</h2>

                <!-- éš¾ç‚¹1: ç­¾åæœºåˆ¶ -->
                <div class="content-section">
                    <h3 style="color: #667eea; margin: 20px 0 15px; display: flex; align-items: center; gap: 10px;">
                        <span style="font-size: 1.5em;">ğŸ”</span> 1. ç­¾åæœºåˆ¶
                    </h3>
                    
                    <div class="highlight-box info" style="margin: 15px 0; background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);">
                        <div class="highlight-title info-title" style="display: flex; align-items: center; gap: 8px;">
                            <span>ğŸ” ç­¾åæœºåˆ¶åŸç†</span>
                        </div>
                        <p>æ‰€æœ‰è¯·æ±‚å¿…é¡»å¸¦ç­¾åï¼Œé˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹</p>
                    </div>
                    
                    <!-- ç­¾åæµç¨‹å›¾ -->
                    <div class="flow-chart-horizontal" style="display: flex; align-items: center; justify-content: center; gap: 5px; margin: 25px 0; flex-wrap: nowrap; padding: 20px 0; width: 100%;">
                        <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 150px; position: relative; margin: 10px; flex: none; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                            <div class="flow-node-circle" style="width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; margin-bottom: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 2; position: relative; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                1
                            </div>
                            <div class="flow-node-title" style="font-size: 1rem; font-weight: 600; color: #2c3e50; margin-bottom: 8px; text-align: center;">
                                å‚æ•°æ’åº
                            </div>
                            <div class="flow-node-content" style="background: #f8f9fa; border-radius: 8px; padding: 12px; text-align: center; width: 100%; border: 1px solid #e1e8ed; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                                <div style="font-size: 0.8rem; color: #666;">æŒ‰å­—å…¸åºæ’åˆ—å‚æ•°</div>
                            </div>
                        </div>
                        <div style="font-size: 1.5rem; color: #667eea; margin: 0 5px;">â†’</div>
                        
                        <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 150px; position: relative; margin: 10px; flex: none; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                            <div class="flow-node-circle" style="width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; margin-bottom: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 2; position: relative; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                2
                            </div>
                            <div class="flow-node-title" style="font-size: 1rem; font-weight: 600; color: #2c3e50; margin-bottom: 8px; text-align: center;">
                                å­—ç¬¦ä¸²æ‹¼æ¥
                            </div>
                            <div class="flow-node-content" style="background: #f8f9fa; border-radius: 8px; padding: 12px; text-align: center; width: 100%; border: 1px solid #e1e8ed; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                                <div style="font-size: 0.8rem; color: #666;">æ·»åŠ å¯†é’¥æ‹¼æ¥</div>
                            </div>
                        </div>
                        <div style="font-size: 1.5rem; color: #667eea; margin: 0 5px;">â†’</div>
                        
                        <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 150px; position: relative; margin: 10px; flex: none; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                            <div class="flow-node-circle" style="width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; margin-bottom: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 2; position: relative; background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
                                3
                            </div>
                            <div class="flow-node-title" style="font-size: 1rem; font-weight: 600; color: #2c3e50; margin-bottom: 8px; text-align: center;">
                                åŠ å¯†ç”Ÿæˆ
                            </div>
                            <div class="flow-node-content" style="background: #f8f9fa; border-radius: 8px; padding: 12px; text-align: center; width: 100%; border: 1px solid #e1e8ed; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                                <div style="font-size: 0.8rem; color: #666;">HMAC-SHA256</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç­¾åç®—æ³•å®ç° -->
                    <div class="highlight-box info" style="margin: 20px 0; background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);">
                        <div class="highlight-title info-title" style="display: flex; align-items: center; gap: 8px;">
                            <span>ğŸ” ç­¾åç®—æ³•å®ç°</span>
                        </div>
                        <p>ä¸‹é¢æ˜¯å®Œæ•´çš„ç­¾åç”Ÿæˆå’ŒéªŒè¯è¿‡ç¨‹ï¼š</p>
                    </div>

                    <!-- ç­¾åç”Ÿæˆæ­¥éª¤ -->
                    <div class="code-block" style="white-space: pre;">
                        <pre><code>
<span class="comment"># ç­¾åç®—æ³•å®ç°è¯¦è§£</span>
<span class="keyword">import</span> hmac
<span class="keyword">import</span> hashlib

<span class="comment"># æ­¥éª¤1: å‚æ•°é¢„å¤„ç†</span>
<span class="keyword">def</span> <span class="function">prepare_params</span>(raw_params):
    <span class="comment"># ç§»é™¤ç­¾åå­—æ®µå¹¶æŒ‰å­—å…¸åºæ’åº</span>
    clean_params = {k: v <span class="keyword">for</span> k, v <span class="keyword">in</span> raw_params.items() <span class="keyword">if</span> k != <span class="string">'sign'</span>}
    <span class="keyword">return</span> <span class="function">sorted</span>(clean_params.items())

<span class="comment"># æ­¥éª¤2: ç”Ÿæˆç­¾å</span>
<span class="keyword">def</span> <span class="function">generate_signature</span>(params, secret_key):
    <span class="comment"># æŒ‰å‚æ•°åæ’åº</span>
    sorted_params = <span class="function">prepare_params</span>(params)
    
    <span class="comment"># æ‹¼æ¥å‚æ•°å­—ç¬¦ä¸²</span>
    param_str = <span class="string">"&"</span>.join([f<span class="string">"{k}={v}"</span> <span class="keyword">for</span> k, v <span class="keyword">in</span> sorted_params])
    
    <span class="comment"># æ·»åŠ å¯†é’¥å¹¶ç”Ÿæˆç­¾å</span>
    sign_str = f<span class="string">"{param_str}&key={secret_key}"</span>
    
    <span class="comment"># ä½¿ç”¨HMAC-SHA256ç”Ÿæˆç­¾å</span>
    sign = hmac.<span class="function">new</span>(
        secret_key.encode(<span class="string">'utf-8'</span>),
        sign_str.encode(<span class="string">'utf-8'</span>),
        hashlib.sha256
    ).hexdigest().lower()  <span class="comment"># è½¬æ¢ä¸ºå°å†™</span>
    
    <span class="keyword">return</span> sign

<span class="comment"># æ­¥éª¤3: éªŒè¯ç­¾å</span>
<span class="keyword">def</span> <span class="function">verify_signature</span>(received_params, received_sign, secret_key):
    <span class="comment"># é‡æ–°è®¡ç®—ç­¾å</span>
    expected_sign = <span class="function">generate_signature</span>(received_params, secret_key)
    
    <span class="comment"># å®‰å…¨æ¯”è¾ƒï¼ˆé˜²æ­¢æ—¶åºæ”»å‡»ï¼‰</span>
    <span class="keyword">return</span> hmac.compare_digest(expected_sign, received_sign.lower())

<span class="comment"># ä½¿ç”¨ç¤ºä¾‹</span>
sample_params = {
    <span class="string">"amount"</span>: <span class="string">"100.00"</span>,
    <span class="string">"currency"</span>: <span class="string">"CNY"</span>,
    <span class="string">"merchant_id"</span>: <span class="string">"M123456"</span>,
    <span class="string">"order_id"</span>: <span class="string">"ORD20230101001"</span>,
    <span class="string">"timestamp"</span>: <span class="string">"1672531200"</span>
}
api_secret = <span class="string">"your_super_secret_api_key_here"</span>

calculated_signature = <span class="function">generate_signature</span>(sample_params, api_secret)
<span class="function">print</span>(f<span class="string">"è®¡ç®—å¾—åˆ°çš„ç­¾å: {calculated_signature}"</span>)

<span class="comment"># éªŒè¯ç­¾å</span>
is_valid = <span class="function">verify_signature</span>(sample_params, calculated_signature, api_secret)
<span class="function">print</span>(f<span class="string">"ç­¾åæ˜¯å¦æœ‰æ•ˆ: {is_valid}"</span>)
                    </div>
                </code></pre>
                        âš ï¸ éš¾ç‚¹ï¼š3ç§’å†…å¿…é¡»è¿”å›"success"ï¼Œå¦åˆ™å¹³å°ä¼šé‡è¯•
                    </div>
                </div>

                <!-- éš¾ç‚¹3: å¹‚ç­‰æ€§ -->
                <div class="content-section">
                    <h3 style="color: #11998e; margin: 20px 0 15px; display: flex; align-items: center; gap: 10px;">
                        <span style="font-size: 1.5em;">ğŸ”„</span> 3. å¹‚ç­‰æ€§è®¾è®¡
                    </h3>
                    
                    <div class="highlight-box info" style="margin: 15px 0; background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);">
                        <div class="highlight-title info-title" style="display: flex; align-items: center; gap: 8px;">
                            <span>âœ… å¹‚ç­‰æ€§</span>
                        </div>
                        <p>åŒä¸€ä¸ªè¯·æ±‚é‡å¤æ‰§è¡Œï¼Œç»“æœä¸€è‡´</p>
                    </div>
                    
                    <!-- å¹‚ç­‰æ€§åœºæ™¯å›¾ -->
                    <div class="flow-chart-horizontal" style="display: flex; align-items: center; justify-content: center; gap: 5px; margin: 25px 0; flex-wrap: nowrap; padding: 20px 0; width: 100%;">
                        <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 120px; position: relative; margin: 10px; flex: none; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                            <div class="flow-node-circle" style="width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; margin-bottom: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 2; position: relative; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                ğŸ‘¤
                            </div>
                            <div class="flow-node-title" style="font-size: 0.9rem; font-weight: 600; color: #2c3e50; margin-bottom: 8px; text-align: center;">
                                ç”¨æˆ·
                            </div>
                        </div>
                        <div style="font-size: 1.5rem; color: #667eea; margin: 0 5px;">â†’</div>
                        
                        <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 120px; position: relative; margin: 10px; flex: none; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                            <div class="flow-node-circle" style="width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; margin-bottom: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 2; position: relative; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                ğŸ–±ï¸
                            </div>
                            <div class="flow-node-title" style="font-size: 0.9rem; font-weight: 600; color: #2c3e50; margin-bottom: 8px; text-align: center;">
                                é‡å¤ç‚¹å‡»
                            </div>
                        </div>
                        <div style="font-size: 1.5rem; color: #667eea; margin: 0 5px;">â†’</div>
                        
                        <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 120px; position: relative; margin: 10px; flex: none; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                            <div class="flow-node-circle" style="width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; margin-bottom: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 2; position: relative; background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
                                ğŸ“¦
                            </div>
                            <div class="flow-node-title" style="font-size: 0.9rem; font-weight: 600; color: #2c3e50; margin-bottom: 8px; text-align: center;">
                                å¹‚ç­‰å¤„ç†
                            </div>
                        </div>
                        <div style="font-size: 1.5rem; color: #667eea; margin: 0 5px;">â†’</div>
                        
                        <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 120px; position: relative; margin: 10px; flex: none; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                            <div class="flow-node-circle" style="width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; margin-bottom: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 2; position: relative; background: linear-gradient(135deg, #ff6b6b 0%, #ee5a5a 100%);">
                                âœ…
                            </div>
                            <div class="flow-node-title" style="font-size: 0.9rem; font-weight: 600; color: #2c3e50; margin-bottom: 8px; text-align: center;">
                                ç»“æœä¸€è‡´
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä¸ºä»€ä¹ˆéœ€è¦å¹‚ç­‰æ€§ -->
                    <div class="highlight-box warning" style="margin: 20px 0; background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);">
                        <div class="highlight-title warning-title" style="display: flex; align-items: center; gap: 8px;">
                            ğŸ’¡ ä¸ºä»€ä¹ˆè¦å¹‚ç­‰ï¼Ÿ
                        </div>
                        <ul style="margin: 10px 0 0 20px; padding: 0;">
                            <li style="margin-bottom: 5px;">â€¢ ç”¨æˆ·é‡å¤ç‚¹å‡»æ”¯ä»˜æŒ‰é’®</li>
                            <li style="margin-bottom: 5px;">â€¢ ç½‘ç»œè¶…æ—¶å¯¼è‡´é‡è¯•</li>
                            <li>â€¢ å›è°ƒé‡å¤é€šçŸ¥</li>
                        </ul>
                    </div>
                    
                    <!-- å¹‚ç­‰æ€§ä»£ç  -->
                    <div class="code-block" style="margin: 20px 0;">
                        <pre><code>
<span class="comment"># ä½¿ç”¨å”¯ä¸€è®¢å•å·ä½œä¸ºå¹‚ç­‰é”®</span>
<span class="keyword">def</span> <span class="function">create_order</span>(out_trade_no, amount):
    <span class="comment"># æ£€æŸ¥è®¢å•æ˜¯å¦å·²å­˜åœ¨</span>
    order = <span class="function">db.get_order</span>(out_trade_no)
    <span class="keyword">if</span> order:
        <span class="keyword">return</span> order  <span class="comment"># å·²å­˜åœ¨ï¼Œç›´æ¥è¿”å›</span>

    <span class="comment"># ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°è®¢å•</span>
    order = <span class="function">db.create_order</span>(...)
    <span class="keyword">return</span> order
                    </div>
                </code></pre>
                    
                    <div style="background: #e8f5e9; border-left: 4px solid #43a047; padding: 15px; border-radius: 0 8px 8px 0; margin: 15px 0; font-weight: 500; color: #2e7d32;">
                        ğŸ’¡ æ ¸å¿ƒï¼šç”¨ out_trade_noï¼ˆå•†æˆ·è®¢å•å·ï¼‰ä½œä¸ºå”¯ä¸€çº¦æŸ
                    </div>
                </div>

                <!-- éš¾ç‚¹4: è¶…æ—¶å¤„ç† -->
                <div class="content-section">
                    <h3 style="color: #ff6b6b; margin: 20px 0 15px; display: flex; align-items: center; gap: 10px;">
                        <span style="font-size: 1.5em;">â°</span> 4. è¶…æ—¶ä¸çŠ¶æ€æŸ¥è¯¢
                    </h3>
                    
                    <div class="highlight-box info" style="margin: 15px 0; background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);">
                        <div class="highlight-title info-title" style="display: flex; align-items: center; gap: 8px;">
                            <span>â±ï¸ è¶…æ—¶å¤„ç†</span>
                        </div>
                        <p>æ”¯ä»˜è¶…æ—¶äº†æ€ä¹ˆåŠï¼Ÿ</p>
                    </div>
                    
                    <!-- è¶…æ—¶å¤„ç†æµç¨‹å›¾ -->
                    <div class="flow-chart-horizontal" style="display: flex; align-items: center; justify-content: center; gap: 5px; margin: 25px 0; flex-wrap: nowrap; padding: 20px 0; width: 100%;">
                        <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 120px; position: relative; margin: 10px; flex: none; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                            <div class="flow-node-circle" style="width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; margin-bottom: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 2; position: relative; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                ğŸ•
                            </div>
                            <div class="flow-node-title" style="font-size: 0.9rem; font-weight: 600; color: #2c3e50; margin-bottom: 8px; text-align: center;">
                                è¶…æ—¶å‘ç”Ÿ
                            </div>
                        </div>
                        <div style="font-size: 1.5rem; color: #667eea; margin: 0 5px;">â†’</div>
                        
                        <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 120px; position: relative; margin: 10px; flex: none; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                            <div class="flow-node-circle" style="width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; margin-bottom: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 2; position: relative; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                ğŸ”
                            </div>
                            <div class="flow-node-title" style="font-size: 0.9rem; font-weight: 600; color: #2c3e50; margin-bottom: 8px; text-align: center;">
                                ä¸»åŠ¨æŸ¥è¯¢
                            </div>
                        </div>
                        <div style="font-size: 1.5rem; color: #667eea; margin: 0 5px;">â†’</div>
                        
                        <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 120px; position: relative; margin: 10px; flex: none; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                            <div class="flow-node-circle" style="width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; margin-bottom: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 2; position: relative; background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
                                ğŸ“Š
                            </div>
                            <div class="flow-node-title" style="font-size: 0.9rem; font-weight: 600; color: #2c3e50; margin-bottom: 8px; text-align: center;">
                                ç¡®è®¤çŠ¶æ€
                            </div>
                        </div>
                    </div>
                    
                    <!-- è§£å†³æ–¹æ¡ˆ -->
                    <div class="highlight-box info" style="margin: 20px 0; background: linear-gradient(135deg, #e1f5fe 0%, #b3e5fc 100%);">
                        <div class="highlight-title info-title" style="display: flex; align-items: center; gap: 8px;">
                            ğŸ”„ è§£å†³æ–¹æ¡ˆï¼šä¸»åŠ¨æŸ¥è¯¢
                        </div>
                        <p>æ”¯ä»˜æˆåŠŸåï¼Œé¡µé¢å¡ä½äº† â†’ è°ƒç”¨æŸ¥è¯¢æ¥å£ç¡®è®¤çŠ¶æ€</p>
                    </div>
                    
                    <!-- è¶…æ—¶å¤„ç†ä»£ç  -->
                    <div class="code-block" style="margin: 20px 0;">
                        <pre><code>
<span class="comment"># è¶…æ—¶åçš„å¤„ç†æµç¨‹</span>
<span class="keyword">def</span> <span class="function">pay_with_timeout</span>(order_id):
    <span class="keyword">try</span>:
        result = <span class="function">request_payment</span>(order_id, timeout=<span class="string">"30s"</span>)
    <span class="keyword">except</span> Timeout:
        <span class="comment"># è¶…æ—¶äº†ï¼Ÿç«‹å³æŸ¥è¯¢çŠ¶æ€</span>
        status = <span class="function">query_order_status</span>(order_id)
        <span class="keyword">if</span> status == <span class="string">"SUCCESS"</span>:
            <span class="keyword">return</span> <span class="string">"å·²æ”¯ä»˜"</span>
        <span class="keyword">else</span>:
            <span class="keyword">return</span> <span class="string">"æ”¯ä»˜ä¸­ï¼Œè¯·ç¨åæŸ¥è¯¢"</span>
                    </div>
                    </code></pre>
                    <div style="background: #fff3e0; border-left: 4px solid #ff6b00; padding: 15px; border-radius: 0 8px 8px 0; margin: 15px 0; font-weight: 500; color: #e65100;">
                        âš ï¸ éš¾ç‚¹ï¼šè®¢å•çŠ¶æ€ä»¥æŸ¥è¯¢ç»“æœä¸ºå‡†ï¼Œåˆ«ä¿¡å‰ç«¯
                    </div>
                </div>
            </div>

            <!-- è®¢å•çŠ¶æ€æµè½¬ -->
            <div class="content">
                <h2>ğŸ“‹ è®¢å•çŠ¶æ€æµè½¬</h2>
                <div class="flow-chart-horizontal" style="display: flex; align-items: center; justify-content: center; gap: 5px; margin: 30px 0; flex-wrap: nowrap; padding: 20px 0; width: 100%;">
                    <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 120px; position: relative; margin: 10px; flex: none; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                        <div class="flow-node-status created" style="min-width: 100px; padding: 12px 16px; border-radius: 8px; font-weight: 600; text-align: center; background: #e3f2fd; color: #1565c0; border: 2px solid #1565c0;">
                            CREATED
                        </div>
                        <div class="flow-node-label" style="margin-top: 8px; font-size: 0.9rem; color: #666;">è®¢å•åˆ›å»º</div>
                    </div>
                    <div style="font-size: 1.5rem; color: #667eea; margin: 0 5px;">â†’</div>
                    <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 120px; position: relative; margin: 10px; flex: none; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                        <div class="flow-node-status wait" style="min-width: 100px; padding: 12px 16px; border-radius: 8px; font-weight: 600; text-align: center; background: #fff3e0; color: #e65100; border: 2px solid #e65100;">
                            WAIT_PAY
                        </div>
                        <div class="flow-node-label" style="margin-top: 8px; font-size: 0.9rem; color: #666;">ç­‰å¾…æ”¯ä»˜</div>
                    </div>
                    <div style="font-size: 1.5rem; color: #667eea; margin: 0 5px;">â†’</div>
                    <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 120px; position: relative; margin: 10px; flex: none; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                        <div class="flow-node-status success" style="min-width: 100px; padding: 12px 16px; border-radius: 8px; font-weight: 600; text-align: center; background: #e8f5e9; color: #2e7d32; border: 2px solid #2e7d32;">
                            SUCCESS
                        </div>
                        <div class="flow-node-label" style="margin-top: 8px; font-size: 0.9rem; color: #666;">æ”¯ä»˜æˆåŠŸ</div>
                    </div>
                    <div style="font-size: 1.5rem; color: #667eea; margin: 0 5px;">â†’</div>
                    <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 120px; position: relative; margin: 10px; flex: none; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                        <div class="flow-node-status refund" style="min-width: 100px; padding: 12px 16px; border-radius: 8px; font-weight: 600; text-align: center; background: #fce4ec; color: #c2185b; border: 2px solid #c2185b;">
                            REFUND
                        </div>
                        <div class="flow-node-label" style="margin-top: 8px; font-size: 0.9rem; color: #666;">å·²é€€æ¬¾</div>
                    </div>
                </div>
                
                <!-- ç¬¬äºŒæ¡çŠ¶æ€æµè½¬è·¯å¾„ -->
                <div class="flow-chart-horizontal" style="display: flex; align-items: center; justify-content: center; gap: 5px; margin: 20px 0; flex-wrap: nowrap; padding: 10px 0; width: 100%;">
                    <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 120px; position: relative; margin: 10px; flex: none; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                        <div class="flow-node-status wait" style="min-width: 100px; padding: 12px 16px; border-radius: 8px; font-weight: 600; text-align: center; background: #fff3e0; color: #e65100; border: 2px solid #e65100;">
                            WAIT_PAY
                        </div>
                        <div class="flow-node-label" style="margin-top: 8px; font-size: 0.9rem; color: #666;">ç­‰å¾…æ”¯ä»˜</div>
                    </div>
                    <div style="font-size: 1.5rem; color: #667eea; margin: 0 5px;">â†’</div>
                    <div class="flow-node" style="display: flex; flex-direction: column; align-items: center; min-width: 120px; position: relative; margin: 10px; flex: none; text-align: center; background: transparent; padding: 0; border: none; box-shadow: none;">
                        <div class="flow-node-status closed" style="min-width: 100px; padding: 12px 16px; border-radius: 8px; font-weight: 600; text-align: center; background: #f5f5f5; color: #666; border: 2px solid #999;">
                            CLOSED
                        </div>
                        <div class="flow-node-label" style="margin-top: 8px; font-size: 0.9rem; color: #666;">è¶…æ—¶å…³é—­</div>
                    </div>
                </div>
            </div>

            <!-- å¸¸è§é”™è¯¯ -->
            <div class="content">
                <h2>âš ï¸ å¸¸è§é”™è¯¯ç </h2>
                <table class="api-table">
                    <thead>
                        <tr>
                            <th>é”™è¯¯ç </th>
                            <th>å«ä¹‰</th>
                            <th>è§£å†³æ–¹æ¡ˆ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td><strong>1001</strong></td><td>å‚æ•°é”™è¯¯</td><td>æ£€æŸ¥å¿…å¡«å‚æ•°æ˜¯å¦å®Œæ•´</td></tr>
                        <tr><td><strong>1002</strong></td><td>ç­¾åå¤±è´¥</td><td>æ£€æŸ¥ç­¾åç®—æ³•å’Œå¯†é’¥</td></tr>
                        <tr><td><strong>1003</strong></td><td>è®¢å•ä¸å­˜åœ¨</td><td>æ£€æŸ¥è®¢å•å·æ˜¯å¦æ­£ç¡®</td></tr>
                        <tr><td><strong>1004</strong></td><td>è®¢å•çŠ¶æ€å¼‚å¸¸</td><td>åˆ«é‡å¤æ“ä½œï¼Œæ¢æŸ¥è¯¢æ¥å£</td></tr>
                        <tr><td><strong>1005</strong></td><td>ä½™é¢ä¸è¶³</td><td>æç¤ºç”¨æˆ·å……å€¼</td></tr>
                        <tr><td><strong>1006</strong></td><td>ç³»ç»Ÿç¹å¿™</td><td>ç¨åé‡è¯•</td></tr>
                    </tbody>
                </table>
            </div>

            <!-- æ ¸å¿ƒAPI -->
            <div class="content">
                <h2>ğŸ“¡ å››ä¸ªæ ¸å¿ƒæ¥å£</h2>
                <div class="highlight-box success">
                    <div class="highlight-title success-title">ğŸ“ æ¥å£æ¸…å•</div>
                    <p>
                        <strong>1. ç»Ÿä¸€ä¸‹å•</strong> /api/payment/create - åˆ›å»ºæ”¯ä»˜è®¢å•<br>
                        <strong>2. æ”¯ä»˜æŸ¥è¯¢</strong> /api/payment/query - æŸ¥è¯¢è®¢å•çŠ¶æ€<br>
                        <strong>3. ç”³è¯·é€€æ¬¾</strong> /api/payment/refund - é€€æ¬¾æ“ä½œ<br>
                        <strong>4. å¼‚æ­¥å›è°ƒ</strong> å•†æˆ·æä¾›notify_url - æ¥æ”¶æ”¯ä»˜ç»“æœ
                    </p>
                </div>
            </div>
        </div>
    </main>

    <footer><div class="container"></div></footer>
    <script src="js/main.js"></script>
</body>
</html>
